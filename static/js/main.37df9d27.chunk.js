(this["webpackJsonpstar-wars-planets"]=this["webpackJsonpstar-wars-planets"]||[]).push([[0],{12:function(e,t,a){e.exports={Card:"Card_Card__2q3oW",Card__property:"Card_Card__property__Qx810",name:"Card_name__2vmhH",value:"Card_value__6nRg7"}},20:function(e,t,a){e.exports={Library:"Library_Library__1u2cu",NotFound:"Library_NotFound__1udVW",showMoreBtn:"Library_showMoreBtn__mdxik",showMoreBtn_preloader:"Library_showMoreBtn_preloader__1i_II"}},21:function(e,t,a){e.exports={NotFound404:"NotFound404_NotFound404__31FL1",contentWrapper:"NotFound404_contentWrapper__1MMxd",title:"NotFound404_title__212k2",mainPageBtn:"NotFound404_mainPageBtn__1LdWv"}},28:function(e,t,a){e.exports={InfoField:"InfoField_InfoField__3Lg2g",name:"InfoField_name__28hgE",values:"InfoField_values__39mB-"}},35:function(e,t,a){e.exports={PlanetPage:"PlanetPage_PlanetPage__2sROt"}},36:function(e,t,a){e.exports={searchForm:"SearchForm_searchForm__3l_e1",search:"SearchForm_search__2nzDX"}},48:function(e,t,a){e.exports={Preloader:"Preloader_Preloader__2WIgi"}},56:function(e,t,a){},57:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/star-wars-gif.153166d7.gif"},82:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),s=a(22),i=a.n(s),o=(a(56),a(57),a(3)),l=a(24),u=a(25),d=a(14),p=a(7),j=a(27),h=a(4),b=a(48),m=a.n(b),O=function(e){return Object(n.jsx)("div",Object(h.a)({className:m.a.Preloader},e))},f=a(13),_=a.n(f),x=a(16),v=a(29),g=a(19),y=a.n(g),P=y.a.create({baseURL:"https://swapi.dev/api/"}),N={getPlanets:function(){return P.get("planets/").then((function(e){return e.data}))},getMorePlanets:function(e){return y.a.get(e).then((function(e){return e.data}))},getPlanetDetails:function(e){return P.get("planets/".concat(e,"/")).then((function(e){return e.data}))},getPersonName:function(e){return y.a.get(e).then((function(e){return e.data.name}))},searchPlanets:function(e){return y.a.get("https://swapi.dev/api/planets/?search=".concat(e)).then((function(e){return e.data}))}},L="planets/SET_PLANETS",E="planets/ADD_PLANETS",w="planets/TOGGLE_IS_GLOBAL_LOADING",F="planets/TOGGLE_IS_LOADING",S={next:"",planets:[],isLoading:!1,isGlobalLoading:!1},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(h.a)(Object(h.a)({},e),{},{planets:Object(v.a)(t.payload.results),next:t.payload.next});case E:return Object(h.a)(Object(h.a)({},e),{},{planets:[].concat(Object(v.a)(e.planets),Object(v.a)(t.payload.results)),next:t.payload.next});case F:return Object(h.a)(Object(h.a)({},e),{},{isLoading:t.isLoading});case w:return Object(h.a)(Object(h.a)({},e),{},{isGlobalLoading:t.isLoading});default:return e}},A=function(e){return{type:L,payload:e}},C=function(e){return{type:F,isLoading:e}},D=function(e){return{type:w,isLoading:e}},G=a(11),T=a(12),V=a.n(T),M=function(e){var t=e.id,a=e.name,r=e.climate,c=e.population;return Object(n.jsxs)(G.NavLink,{className:V.a.Card,to:"/planet/".concat(t),children:[Object(n.jsxs)("div",{className:V.a.Card__property,children:[Object(n.jsx)("div",{className:V.a.name,children:"Name"}),Object(n.jsx)("div",{className:V.a.value,children:a})]}),Object(n.jsxs)("div",{className:V.a.Card__property,children:[Object(n.jsx)("div",{className:V.a.name,children:"Climate"}),Object(n.jsx)("div",{className:V.a.value,children:r})]}),Object(n.jsxs)("div",{className:V.a.Card__property,children:[Object(n.jsx)("div",{className:V.a.name,children:"Population"}),Object(n.jsx)("div",{className:V.a.value,children:c})]})]})},B=c.a.memo(M),k=a(20),q=a.n(k),R=a(49),W=a.n(R),U=function(e){var t=e.planets,a=e.requestPlanets,c=e.requestMorePlanets,s=e.next,i=e.isGlobalLoading,o=e.isLoading,d=e.match,p=e.searchPlanets,h=Object(u.a)(e,["planets","requestPlanets","requestMorePlanets","next","isGlobalLoading","isLoading","match","searchPlanets"]),b=Object(j.useLastLocation)();Object(r.useEffect)((function(){d.params.searchValue?p(d.params.searchValue):(0===t.length||b&&/(search|\/404)/.test(b.pathname))&&a()}),[d.params.searchValue,p,h.location,a,b,t.length]);var m=function(e){return+e.match(/(?<=planets\/)\d+/i)};return i?Object(n.jsx)(O,{style:{height:"calc(100vh - 70px)"}}):Object(n.jsxs)(n.Fragment,{children:[0===t.length&&Object(n.jsx)("div",{className:q.a.NotFound,children:"PLANETS NO FOUND"}),Object(n.jsx)("div",{className:q.a.Library,children:t.map((function(e){return Object(n.jsx)(B,{id:m(e.url),name:e.name,climate:e.climate,population:e.population},m(e.url))}))}),s&&Object(n.jsx)("div",{className:W()(q.a.showMoreBtn,Object(l.a)({},q.a.showMoreBtn_preloader,o)),onClick:function(){o||c(s)},children:!o&&"SHOW MORE"})]})},H=Object(p.d)(o.o,Object(d.b)((function(e){return{planets:e.planets.planets,next:e.planets.next,isLoading:e.planets.isLoading,isGlobalLoading:e.planets.isGlobalLoading}}),{requestMorePlanets:function(e){return function(){var t=Object(x.a)(_.a.mark((function t(a){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(C(!0)),t.next=3,N.getMorePlanets(e);case 3:n=t.sent,a({type:E,payload:n}),a(C(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},requestPlanets:function(){return function(){var e=Object(x.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(D(!0)),e.next=3,N.getPlanets();case 3:a=e.sent,t(A(a)),t(D(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},searchPlanets:function(e){return function(){var t=Object(x.a)(_.a.mark((function t(a){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(D(!0)),t.next=3,N.searchPlanets(e);case 3:n=t.sent,a(A(n)),a(D(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}))(c.a.memo(U)),X=a(37),J="currentPlanet/SET_PLANET_DETAILS",z="currentPlanet/SET_PLANET_RESIDENTS",Q="currentPlanet/TOGGLE_IS_LOADING",K={name:null,rotation_period:null,diameter:null,climate:null,gravity:null,terrain:null,population:null,residents:[],isLoading:!1},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(h.a)(Object(h.a)({},e),{},{name:t.payload.name,rotation_period:t.payload.rotation_period,diameter:t.payload.diameter,climate:t.payload.climate,gravity:t.payload.gravity,terrain:t.payload.terrain,population:t.payload.population});case z:return Object(h.a)(Object(h.a)({},e),{},{residents:t.payload});case Q:return Object(h.a)(Object(h.a)({},e),{},{isLoading:t.isLoading});default:return e}},Z=function(e){return{type:z,payload:e}},$=function(e){return{type:Q,isLoading:e}},ee=a(28),te=a.n(ee),ae=function(e){var t=e.propertyName,a=e.values;return Object(n.jsxs)("div",{className:te.a.InfoField,children:[Object(n.jsx)("span",{className:te.a.name,children:t&&t.toUpperCase().replace("_"," ")}),Object(n.jsx)("div",{className:te.a.values,children:Array.isArray(a)?a.map((function(e){return Object(n.jsx)("span",{children:e},e)})):Object(n.jsx)("span",{children:a})})]})},ne=a(35),re=a.n(ne),ce=function(e){var t=e.match,c=e.requestPlanetDetails,s=e.details,i=e.isLoading;Object(u.a)(e,["match","requestPlanetDetails","details","isLoading"]);return Object(r.useEffect)((function(){c(t.params.id)}),[t.params.id,c]),i?Object(n.jsx)(O,{style:{height:"calc(100vh - 70px)"}}):Object(n.jsxs)("div",{className:re.a.PlanetPage,children:[Object(n.jsx)("div",{className:re.a.InfoBlock,children:Object.entries(s).filter((function(e){var t=Object(X.a)(e,2),a=(t[0],t[1]);return a&&a.length>0})).map((function(e){var t=Object(X.a)(e,2),a=t[0],r=t[1];return Object(n.jsx)(ae,{propertyName:a,values:r},a)}))}),Object(n.jsx)("img",{src:a(81).default,alt:""})]})},se=Object(p.d)(o.o,Object(d.b)((function(e){return{details:{name:e.currentPlanet.name,rotation_period:e.currentPlanet.rotation_period,diameter:e.currentPlanet.diameter,climate:e.currentPlanet.climate,gravity:e.currentPlanet.gravity,terrain:e.currentPlanet.terrain,population:e.currentPlanet.population,residents:e.currentPlanet.residents},isLoading:e.currentPlanet.isLoading}}),{requestPlanetDetails:function(e){return function(){var t=Object(x.a)(_.a.mark((function t(a){var n,r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a($(!0)),t.next=3,N.getPlanetDetails(e);case 3:return n=t.sent,a({type:J,payload:n}),t.next=7,Promise.all(n.residents.map((function(e){return N.getPersonName(e)})));case 7:r=t.sent,a(Z(r)),a($(!1));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}))(c.a.memo(ce)),ie=a(36),oe=a.n(ie),le="search/SET_SEARCH_VALUE",ue={searchValue:""},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return Object(h.a)(Object(h.a)({},e),{},{searchValue:t.payload});default:return e}},pe=function(e){var t=e.setSearchValue,a=e.match,c=e.searchValue,s=e.history;Object(r.useEffect)((function(){a.params.searchValue&&t(a.params.searchValue)}),[a.params.searchValue,t]),window.addEventListener("unhandledrejection",(function(e){404===e.reason.request.status&&s.push("/404")}));return Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c?s.push("/search/".concat(c)):s.push("/")},className:oe.a.searchForm,children:[Object(n.jsx)("input",{className:oe.a.search,type:"text",onChange:function(e){return t(e.target.value)},value:c||"",placeholder:"Search planets..."}),Object(n.jsx)("button",{type:"submit"})]})},je=Object(p.d)(o.o,Object(d.b)((function(e){return{searchValue:e.searchForm.searchValue}}),{setSearchValue:function(e){return{type:le,payload:e}}}))(c.a.memo(pe)),he=a(21),be=a.n(he),me=function(){return Object(n.jsx)("div",{className:be.a.NotFound404,children:Object(n.jsxs)("div",{className:be.a.contentWrapper,children:[Object(n.jsx)("div",{className:be.a.title,children:"404"}),Object(n.jsxs)("div",{children:["whoops! ",Object(n.jsx)("span",{children:"NOT FOUND"})]}),Object(n.jsx)(G.NavLink,{className:be.a.mainPageBtn,to:"/",children:"MAIN PAGE"})]})})},Oe=Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(je,{}),Object(n.jsx)(H,{})]}),fe=Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(je,{}),Object(n.jsx)(se,{})]}),_e=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(o.g,{children:[Object(n.jsx)(o.d,{exact:!0,path:"/",render:function(){return Oe}}),Object(n.jsx)(o.d,{path:"/planet/:id",render:function(){return fe}}),Object(n.jsx)(o.d,{path:"/search/:searchValue",render:function(){return Oe}}),Object(n.jsx)(o.d,{path:"/404",render:function(){return Object(n.jsx)(me,{})}}),Object(n.jsx)(o.d,{path:"*",render:function(){return Object(n.jsx)(o.c,{to:"/404"})}})]})})},xe=a(50),ve=Object(p.c)({planets:I,currentPlanet:Y,searchForm:de}),ge=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,ye=Object(p.e)(ve,ge(Object(p.a)(xe.a)));i.a.render(Object(n.jsx)(G.HashRouter,{children:Object(n.jsx)(j.LastLocationProvider,{children:Object(n.jsx)(d.a,{store:ye,children:Object(n.jsx)(_e,{})})})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.37df9d27.chunk.js.map